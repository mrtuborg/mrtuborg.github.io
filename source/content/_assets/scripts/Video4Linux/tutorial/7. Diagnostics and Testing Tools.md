---
{"publish":true,"title":"7. Diagnostics and Testing Tools","created":"2025-07-07","modified":"2025-07-07","cssclasses":""}
---


[[_assets/scripts/Video4Linux/tutorial/Video4Linux practical tryout\|<- Back to top]]

# 7. Diagnostics and Testing Tools

To effectively develop, test, and troubleshoot Video4Linux (V4L) devices on embedded systems, a variety of diagnostic and testing tools are available. This chapter introduces key utilities and sample applications to help you validate and analyze your video subsystem.

## 7.1 v4l2-ctl Command Reference

`v4l2-ctl` is the primary command-line utility for controlling and querying V4L devices. Commonly used commands include:

- List devices:

  ```
  v4l2-ctl --list-devices
  ```

- Show device capabilities and current settings:

  ```
  v4l2-ctl --device=/dev/video0 --all
  ```

- List supported formats:

  ```
  v4l2-ctl --device=/dev/video0 --list-formats-ext
  ```

- Capture frames or start streaming:

  ```
  v4l2-ctl --device=/dev/video0 --stream-mmap --stream-count=10 --stream-to=output.raw
  ```

- Adjust controls (brightness, contrast, etc.):

  ```
  v4l2-ctl --device=/dev/video0 --set-ctrl=brightness=128
  ```

Refer to the `v4l2-ctl` man page for a full list of options.

## 7.2 Using Media-ctl for Media Controller Devices

For devices with complex media pipelines (e.g., multiple sub-devices), `media-ctl` allows configuration of the media graph:

- List media devices and entities:

  ```
  media-ctl -p
  ```

- Configure links between entities:

  ```
  media-ctl -l '"entity1":0 -> "entity2":1 [1]'
  ```

This tool is essential for embedded devices using the media controller framework to manage video routing.

## 7.3 Sample Applications and Test Scripts

Several sample applications and scripts can help test V4L functionality:

- **Test programs** included in the `v4l-utils` package, such as `v4l2-compliance` for driver compliance testing.  
- Custom scripts using `v4l2-ctl` commands to automate capture and parameter adjustments.  
- Multimedia frameworks like `GStreamer` and `FFmpeg` for building complex pipelines and testing streaming performance.

Using these tools, developers can validate device operation, benchmark performance, and diagnose issues effectively.

---